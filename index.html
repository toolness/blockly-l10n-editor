<!DOCTYPE html>
<meta charset="utf-8">
<style>
html, body {
  font-family: Georgia;
}

a {
  color: inherit;
}

h1, h2 {
  font-weight: normal;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

#l10n {
  border: 1px solid black;
  padding: 1em;
}

/* https://css-tricks.com/snippets/css/clear-fix/ */
.clearfix:after {
  visibility: hidden;
  display: block;
  font-size: 0;
  content: " ";
  clear: both;
  height: 0;
}

#react {
  display: inline;
}

#dat-gui {
  float: right;
}

#dat-gui .close-button {
  display: none;
}

#blockly {
  height: 1800px;
  width: 800px;
}

textarea {
  font-family: monospace;
}
</style>
<title>Blockly Localization Editor Prototype</title>
<div class="container">
<h1>Blockly Localization Editor Prototype</h1>
<p>Below is a localized message based on the example in the <a target="_blank" href="http://userguide.icu-project.org/formatparse/messages">ICU MessageFormat documentation</a>. You can edit the variables used to generate the message using the controls on the right.</p>
<div id="l10n" class="clearfix">
  <div id="dat-gui"></div>
  <div id="react"></div>
</div>
<p>Instead of using ICU, however, we use a simple visual programming language called <a href="https://developers.google.com/blockly/">Blockly</a>. The Blockly code below is dynamically compiled into a <a href="http://facebook.github.io/react/index.html">React</a> component for inclusion in the example above.</p>
<div id="blockly"></div>
<h2>Why Blockly?</h2>
<p>
  Providing localization that feels "native", e.g. which adapts dynamically to pluralization and gender and so on, essentially seems to require writing small computer programs. Localization formats like ICU aren't particularly intuitive to developers or localizers. However, Blockly is nicely suited for allowing non-technical users to create very short, well-behaved programs that compile down to readable JavaScript, which makes it a potential alternative to complex localization message formats.
</p>
<h2>Blockly XML</h2>
<p>Below is the Blockly XML for the Blockly code above. This intermediate representation is what would go in your source code repository, with a different XML document for each locale.</p>
<div id="blockly-xml"></div>
<h2>React Component</h2>
<p>During a build step&mdash;or dynamically in the browser during development&mdash;the locale-specific Blockly XML is converted into a locale-specific React component, which is then used by the application.</p>
<p>The example React component takes the following props:</p>
<div id="props"></div>
<p>Below is the JavaScript generated from the Blockly XML above.</p>
<div id="react-js"></div>
<h2>More Details</h2>
<p>
  For more information, see the <a href="https://github.com/toolness/blockly-l10n-editor">GitHub project</a>.
</p>
</div>
<xml id="toolbox" style="display: none">
  <block type="text"></block>
  <block type="react_component_print"></block>
  <block type="controls_if"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
</xml>
<script src="vendor/react/build/react-with-addons.js"></script>
<script src="vendor/react/build/JSXTransformer.js"></script>
<script src="vendor/google-blockly/blockly_compressed.js"></script>
<script src="vendor/google-blockly/blocks_compressed.js"></script>
<script src="vendor/google-blockly/javascript_compressed.js"></script>
<script src="vendor/google-blockly/msg/js/en.js"></script>
<script src="vendor/underscore.js"></script>
<script src="vendor/dat.gui.js"></script>
<script src="l10n-component-generator.js"></script>
<script src="dat-gui-tooltips.js"></script>
<script src="fields.js"></script>
<script src="custom-blocks.js"></script>
<script type="text/jsx" src="main.jsx"></script>
